<html>
<head>
  <style>
  	#board td{
  		border: 1px solid #000;
  		margin: 0;
  		min-width: 75;
		  width: 75;
		  height: 75;
  		min-height: 75;
  	}

  	.inTransit {
  		/*color: green;*/
  	}

    .highlight {
      background-color: #cfc;
    }

  	table p {
  		margin: 0;
  		border: 1px solid #ccc;
  		color: #fff;
  	}

    #instruction{
      color: #000;
      font-size: 24;
    }

    .squareDescription{
      color: #aaa;
    }

    #move-input input {
      width: 80px;
    }

    #move-input p{
      margin:5px;
      padding:5px;
    }

    #up, #down {
      margin-left:84px;
    }

    #player-view{
      width: 568;
      height: 320px;
      border: 5px solid #000;
    }

  </style>
  <script src="js/jquery-1.11.0.min.js"></script>
  <script src="js/character.js"></script>
  <script src="js/round.js"></script>
  <script src="js/game.js"></script>

  <script>
  

  function randomTile(){
  	 var c = Math.floor(Math.random() * Game.boardWidth);
  	 var r = Math.floor(Math.random() * Game.boardHeight);

  	 return {col : c, row : r};
  }

  function ready(){

    $("#move-input").submit(function(e){
      e.preventDefault();
    });

  	for(var i = 0; i < Game.boardHeight; i++){
  		$("#board").append("<tr></tr>");
  		rows = $("#board tr");
  		row = $(rows[rows.length-1]);
		  for(var j = 0; j < Game.boardWidth; j++){
			  row.append("<td id='"+i+"x"+j+"'><span class='squareDescription'>"+squareDescription({col: i, row: j})+"</span></td>")		
  		}
  	}

  	for(var i = 0; i < Game.nCharacters; i++){
  		Game.characters.push(new Character(randomTile(), randomTile()));
  	}

  	Game.drawCharacters(Game.characters);

    Game.round = new Round(Game.characters);
    Game.round.highlightCurrentMove();
    Game.updateInstruction();

  	$("#move").click(function(e){
      e.preventDefault();
      Game.round.makeMove(function(){
        Game.round.highlightCurrentMove();
        Game.updateInstruction();
        Game.drawCharacters(Game.characters);
      });
      
  	});



  }

  
  document.addEventListener("DOMContentLoaded", ready, false);

  </script>
</head>
<body>
  <div id="player-view">
    <form id="move-input" action="#" method="POST">
      <p><input id="up" type="submit" value="up"></input></p>
      <p><input id="left" type="submit" value="left"></input>
          <input id="hold" type="submit" value="hold"></input>
          <input id="right" type="submit" value="right"></input></p>
      <p><input id="down" type="submit" value="down"></input></p>

    </form>
  </div>
  <p><span id="instruction"></span> <a id="move" href="#">done</a></p>
	<table id="board"></table>
</body>
</html>