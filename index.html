<html>
  <head>
    <style>
    #board {
      float: left;
      margin-right: 20px;
    }

    #board td{
      border: 1px solid #000;
      margin: 0;
      min-width: 75;
      width: 75;
      height: 75;
      min-height: 75;
    }

    .squareDescription{
      color: #aaa;
    }

    #players {
      float: left;
    }

    table p {
      margin: 0;
      border: 1px solid #ccc;
      color: #fff;
    }

    .highlight {
      background-color: #cfc;
    }

    #moveInput button {
      width: 200px;
      height: 30px;
    }

    #moveInput .buttonSpacer {
      min-width: 200px;
      min-height: 30px;
    }

    .gun {
      background-image: url('public/gun.jpg');
      background-repeat: no-repeat;
      background-position: center;
    }

    </style>



    <script type="text/x-handlebars">
      {{outlet}}

      <p><em><a href="#" {{action "toggleDebug"}}>Toggle debug view</a></em></p>

      <br style="clear:both" />
      {{#view "debug" isVisibleBinding="debugIsVisible"}}
        <button {{action 'refreshDebug'}}>refresh</button> <!-- temporary hack until game is an ember model -->
        {{debug-view}}
      {{/view}}
    </script>
  
    <script type="text/x-handlebars" id ="index">
      <h1>Sneak</h1>
      <p>{{#link-to 'setup'}}Start game{{/link-to}}</p>
    </script>
  
    <script type="text/x-handlebars" id="setup">
      <h1>Setup</h1>
      <p>Exit is: {{format-square exit}}</p>
      <ul>
      {{#each item in instructions}}
        <li>{{item.instruction}}</li>
      {{/each}}
      </ul>
      <p>{{#link-to 'characterAssignment'}}Find out your characters{{/link-to}}</p>
    </script>
    
    <script type="text/x-handlebars" id="characterAssignment">
      <h1>Player character assignments</h1>
      {{#if PassManager.isPassing}}
        {{partial 'pass'}}
      {{else}}
        <p>You are {{current-player-color}}.</p>
        <p><button {{action 'next'}}>Got it</button></p>
      {{/if}}
    </script>


    <script type="text/x-handlebars" id="moves">
      <h1>Input moves</h1>
      {{#if PassManager.isPassing}}
        {{partial 'pass'}}
      {{else}}
        <p>You are {{current-player-color}} ({{current-player-name}}).</p>
        <div id="moveInput">
        <p>
          {{#if shoot}}
            <button {{action "submitMove" "shoot" }}>shoot gun</button>
            <button {{action "submitMove" "drop" }}>drop gun</button>
          {{ else }}
            {{#if nw}}  
              <button {{action "submitMove" "nw" }}>nw</button>
            {{ else }}
              <span class="buttonSpacer"></span>
            {{/if}}
            {{#if n}}
              <button {{action "submitMove" "n" }}>n</button>
            {{ else }}
              <span class="buttonSpacer"></span>
            {{/if}}
            {{#if ne }}
              <button {{action "submitMove" "ne" }}>ne</button>
            {{ else }}
              <span class="buttonSpacer"></span>
            {{/if}}
          {{/if}}
        </p>
        <p>        
          {{#if w }}
            <button {{action "submitMove" "w" }}>w</button>
          {{ else }}
            <span class="buttonSpacer"></span>
          {{/if }}
          {{#if hold}}
            <button {{action "submitMove" "hold" }}>hold</button>
          {{ else }}
            <span class="buttonSpacer"></span>
          {{/if }}
          {{#if e }}
          <button {{action "submitMove" "e" }}>e</button>
          {{ else }}
            <span class="buttonSpacer"></span>
          {{/if }}
        </p>
        <p>        
          {{#if sw}}
            <button {{action "submitMove" "sw" }}>sw</button>
          {{ else }}
            <span class="buttonSpacer"></span>
          {{/if }}
          {{#if s}}
           <button {{action "submitMove" "s" }}>s</button>
          {{ else }}
            <span class="buttonSpacer"></span>
          {{/if }}
          {{#if se}}
          <button {{action "submitMove" "se" }}>se</button>
          {{ else }}
            <span class="buttonSpacer"></span>
          {{/if }}
        </p>
        </div>
      {{/if}}
    </script>
    
    <script type="text/x-handlebars" id="moveInstructions">
    <h1>Move Instructions</h1>
    <ul>
    {{#each instruction in instructions}}
      <li>{{ instruction }}</li>
    {{/each}}
    </ul>
    <button {{action "confirm"}}>Done moving</button>
    </script>

    <script type="text/x-handlebars" id="_pass">
      <p>Pass the screen to {{ current-player-public }}</p>
      <p><button {{action 'next'}}>Done</button></p>
    </script>

    <script type="text/x-handlebars" id="dialogs">
      <h1>Dialogs ({{length}})</h1>
      <ul> 
        {{#each item in controller}}
        <li>
          {{item.summary}}
        </li>
        {{/each}}
      </ul>
      <p>{{#link-to 'dialogReveals'}}Reveal dialog results{{/link-to}}</p>
    </script>
  
     <script type="text/x-handlebars" id="dialogReveals">
      <h1>Dialog Reveal</h1>
      {{#if PassManager.isPassing}}
        {{partial 'pass'}}
      {{else}}
        <h3>Your Knowledge</h3>
        <ul>
        {{ current-player-knowledge }}
        </ul>
        <h3>Your Inventory</h3>
        <ul>
        {{current-player-inventory}}
        </ul>
        <p><button {{action 'next'}}>Got it</button></p>
      {{/if}}
    </script>

    <script src="js/libs/jquery-1.10.2.js"></script>
    <script src="js/libs/handlebars-v2.0.0.js"></script>
    <script src="js/libs/ember-1.9.1.js"></script>
    <script src="js/libs/ember-states.js"></script>
    <script src="js/game.js"></script>
    <script src="js/util.js"></script>
    <script src="js/character.js"></script>
    <script src="js/player.js"></script>

    <script src="js/app.js"></script>
  </head>
  <body>
  </body>
</html>