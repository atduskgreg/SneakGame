<html>
<head>
  <style>
  	#board td{
  		border: 1px solid #000;
  		margin: 0;
  		min-width: 75;
		width: 75;
		height: 75;
  		min-height: 75;
  	}

  	.inTransit {
  		/*color: green;*/
  	}

  	table p {
  		margin: 0;
  		border: 1px solid #ccc;
  		color: #fff;
  	}

    #instruction{
      color: #000;
    }

  </style>
  <script src="js/character.js"></script>
  <script src="js/round.js"></script>
  <script src="js/jquery-1.11.0.min.js"></script>

  <script>
  var Game = {
  	boardWidth : 10,
  	boardHeight: 10,
  	nCharacters : 10,
  	characters : [],
    round : null,

  	drawCharacters : function(characters){
  		$("#board p").remove();
  		for(var i = 0; i < characters.length; i++){
  			characters[i].draw();
  		}
  	},

  	moveCharacters : function(characters){
  		for(var i = 0; i < characters.length; i++){
  			characters[i].move();
  		}
  	},
    updateInstruction : function(){
      $("#instruction").html(Game.round.currentMoveDescription());
    }
  }

  function randomTile(){
  	 var c = Math.floor(Math.random() * Game.boardWidth);
  	 var r = Math.floor(Math.random() * Game.boardHeight);

  	 return {col : c, row : r};
  }

  function ready(){

  	for(var i = 0; i < Game.boardHeight; i++){
  		$("#board").append("<tr></tr>");
  		rows = $("#board tr");
  		row = $(rows[rows.length-1]);
		for(var j = 0; j < Game.boardWidth; j++){
			row.append("<td id='"+i+"x"+j+"'></td>")		
  		}
  	}

  	for(var i = 0; i < Game.nCharacters; i++){
  		Game.characters.push(new Character(randomTile(), randomTile()));
  	}

  	Game.drawCharacters(Game.characters);

    Game.round = new Round(Game.characters);

    Game.updateInstruction();

  	$("#move").click(function(e){
      e.preventDefault();
      Game.round.makeMove(function(){
        Game.updateInstruction();
        Game.drawCharacters(Game.characters);
      });
      
  	})

  }

  
  document.addEventListener("DOMContentLoaded", ready, false);

  </script>
</head>
<body>
  <p><span id="instruction"></span> <a id="move" href="#">done</a></p>
	<table id="board"></table>
</body>
</html>